#
# Makefile.in for the kernel software
#
# Contact: JeCortex@yahoo.com
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#

srcdir = @srcdir@
top_srcdir = @top_srcdir@
top_builddir = @top_builddir@

SOURCES =\
	lbd.c \
	command.c \
	lbdcmdline.c \

TARGETS =\
	lbd

include $(top_builddir)/make.build

lbd: $(OBJECTS) $(top_srcdir)/src/lib/libjsraid.a
	$(Q) $(CC) $(CFLAGS) $(LDFLAGS) $(ELDFLAGS) -o $@ $^

cmds.h: $(srcdir)/command-lines.in
	@echo "    [GEN] $@"
	$(Q) set -o pipefail && \
	( echo "/* Do not edit. This file is generated by the Makefile. */" && \
	  echo "#define CMD_NONE 0" && \
	  echo "cmd(CMD_NONE, none)" && \
	  echo "cmd(CMD_COUNT, count)" \
	) > $@

jsraid: cmds.h FORCE

.PHONY: FORCE jsraid cmds.h
FORCE:
